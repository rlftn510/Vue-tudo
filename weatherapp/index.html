<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>weatherapp</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  </head>
  <body>
    <div id="app"></div>
    <div>
      asd
    </div>
    <div>
      <p>도시이름 : <span id="cityName"></span></p>
      <p>현재온도 : <span id="curTemp"></span></p>
      <p>현재습도 : <span id="curWet"></span></p>
      <p>현재날씨 : <span id="curWeather"></span></p>
      <p>날씨상세설명 : <span id="detailWeather"></span></p>
      <p>날씨 이미지 : <img src="" alt="날씨" id="weatherIcon"></p>
      <p>구름 : <span id="curCloud"></span></p>
    </div>
    <span id="todayWeather"></span>

    <div id=result >
        {name}
        {cod}
        {main}
    </div>
    <script>
      axios.get('http://api.openweathermap.org/data/2.5/weather?q=Chuncheon&appid=c102a437a9d8f986c74e57cd6a2dbce1').then(function(res){
        console.log(res)
        var templateStr = loadTemplate('result');
          // 문자열을 원하는 데이터로 치환한다
        var result = replaceTemplate(templateStr, res.data);
          // DOM에 추가
        console.log(result)
        document.getElementById('result').innerHTML = result;
        /*
        * 템플릿을 불러온다
        */
        function loadTemplate(id) {
          return document.getElementById(id).innerHTML;
        }
        /*
        * 템플릿의 문자열을 치환한다
        */
        function replaceTemplate(templateStr, res) {
          var result = templateStr;
          console.log(result) 
          console.log(res)
          for (let key in res) {
            result = result.replace('{' + key + '}', res[key]);
            console.log(typeof res[key])
            // if( == Object){
            //   console.log('객체')
            // }
          }
          return result
          // console.log(result)
        }
      })
      






      // const apiURI = "http://api.openweathermap.org/data/2.5/weather?q=Chuncheon&appid=c102a437a9d8f986c74e57cd6a2dbce1";
      //   $.ajax({
      //       url: apiURI,
      //       dataType: "json",
      //       type: "GET",
      //       async: "false",
      //       success: function(data) {
      //         console.log(data);
      //           cityName.innerHTML =  data.name;
      //           curTemp.innerHTML = Math.round(data.main.temp - 273.15);
      //           curWet.innerHTML = data.main.humidity
      //           curWeather.innerHTML = data.weather[0].main
      //           detailWeather.innerHTML = data.weather[0].description;
      //           curCloud.innerHTML = (data.clouds.all) +"%"

      //           var imgURL = "http://openweathermap.org/img/w/" + data.weather[0].icon + ".png"
      //           $(weatherIcon).attr('src', imgURL)
      //           console.log(data);
      //           console.log("현재온도 : "+ (data.main.temp- 273.15) );
      //           console.log("현재습도 : "+ data.main.humidity);
      //           console.log("날씨 : "+ data.weather[0].main );
      //           console.log("상세날씨설명 : "+ data.weather[0].description );
      //           console.log("날씨 이미지 : "+ data.weather[0].icon );
      //           console.log("바람   : "+ data.wind.speed );
      //           console.log("나라   : "+ data.sys.country );
      //           console.log("도시이름  : "+ data.name );
      //           console.log("구름  : "+ (data.clouds.all) +"%" );          

                


      //       }
      //   })

     
    </script>
    
  </body>
</html>
